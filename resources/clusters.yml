resources:
  clusters:
    # Shared development cluster for interactive work
    healthcare_dev_cluster:
      cluster_name: "Healthcare MLOps Dev - ${bundle.target}"
      spark_version: "14.3.x-cpu-ml-scala2.12"
      node_type_id: "i3.xlarge" 
      num_workers: 2
      autotermination_minutes: 60
      spark_conf:
        "spark.databricks.cluster.profile": "singleNode"
        "spark.master": "local[*]"
        "spark.databricks.adaptive.enabled": "true"
        "spark.databricks.adaptive.coalescePartitions.enabled": "true"
      custom_tags:
        "project": "healthcare-insurance-mlops"
        "environment": "${bundle.target}"
        "team": "data-science"
        "cost-center": "healthcare-analytics"
      init_scripts:
        - workspace:
            destination: "/Shared/init-scripts/install-requirements.sh"
            
    # Production inference cluster  
    healthcare_inference_cluster:
      cluster_name: "Healthcare MLOps Inference - ${bundle.target}"
      spark_version: "14.3.x-cpu-ml-scala2.12"
      node_type_id: "i3.2xlarge"
      num_workers: 4
      autotermination_minutes: 30
      enable_elastic_disk: true
      spark_conf:
        "spark.databricks.adaptive.enabled": "true"
        "spark.databricks.adaptive.coalescePartitions.enabled": "true"
        "spark.sql.execution.arrow.maxRecordsPerBatch": "10000"
        "spark.sql.adaptive.skewJoin.enabled": "true"
      custom_tags:
        "project": "healthcare-insurance-mlops"
        "environment": "${bundle.target}"
        "workload": "batch-inference"
        "cost-center": "healthcare-analytics"
